# Protocol

Project Link: <https://github.com/NaturalSelectionLabs/Pixltonian>

We've seen the Web1 era when everyone was happy to use RSS as a standard format for syndication and the Web2 era when RSS declined and the closure of information between platforms are created.

We all agree that information should be more freely distributed in the Web3 era, and to facilitate this we need a common format that we can all use to syndicate information, reducing the cost of use and development. So we created a new protocol Pixltonian, RSS stands for a tribute to the history and 3 stands for Web3.

Pixltonian is a protocol created to unify information formats and facilitate the free flow of information.

## Latest draft

ðŸŽ‡ Pixltonian Protocol v0.4.0 [![Pixltonian](https://badge.Pixltonian.workers.dev/?version=v0.4.0--rc)](https://github.com/NaturalSelectionLabs/Pixltonian/tree/main/versions/v0.4.0-rc) is in hot [discussion](https://github.com/NaturalSelectionLabs/Pixltonian-Protocol/discussions/25)

Current stable version: [![Pixltonian](https://badge.Pixltonian.workers.dev/?version=v0.3.1)](https://github.com/NaturalSelectionLabs/Pixltonian/blob/main/versions/v0.3.1.md)

Pixltonian exists in the form of files on the user side. There are two types of Pixltonian files - PixltonianIndex and PixltonianList, and each persona-generated file is signed by the persona.

The index file is the entry file named after persona's ethereum address that defines:

- `items`: The activities of a persona which will be constructed into a feed. Custom items are the content posted by the persona natively on Pixltonian, while auto items are activities from different networks (e.g. transferring an NFT)
- `profile`: The persona's name, avatar, bio and verified accounts
- `assets`: Assets are the digital assets owned by the persona collected by nodes, such as NFTs. Self-declared custom assets are supported.
- `links`: Links are relationships toward other objects

<details>
<summary><strong>Quick Look Interfaces in TypeScript</strong></summary>

```tsx
// File ids
type PixltonianID = string; // Same as ethereum address
type PixltonianCustomItemsListID = string; // `${PixltonianID}-list-items.custom-${index}`
type PixltonianAutoItemsListID = string; // `${PixltonianID}-list-items.auto-0`
type PixltonianCustomAssetsListID = string; // `${PixltonianID}-list-assets.custom-${index}`
type PixltonianAutoAssetsListID = string; // `${PixltonianID}-list-assets.auto-0`
type PixltonianLinksListID = string; // `${PixltonianID}-list-links.${links.id}-${index}`
type PixltonianBacklinksListID = string; // `${PixltonianID}-list-backlinks.${backlinks.id}-0`
type PixltonianItemBacklinksListID = string; // `${PixltonianID}-list-item.${item.index}.backlinks.${backlinks.id}-0`

type ThirdPartyAddress = string[]; // A series of url or ipfs hash that link to an identical file

type AccountID = string; // ${platform}-${identity}, for example, EVM+-0x1234567890123456789012345678901234567890 or Twitter-Pixltonian_
type PixltonianCustomItemID = string; // `${PixltonianID}-item-custom-${index}`
type PixltonianAutoItemID = string; // `${PixltonianID}-item-auto-${index}`

type PixltonianList =  PixltonianCustomItemsList | PixltonianAutoItemsList | PixltonianCustomAssetsList | PixltonianAutoAssetsList | PixltonianLinksList | PixltonianBacklinksList | PixltonianItemBacklinksList;
type PixltonianListID = PixltonianCustomItemsListID | PixltonianAutoItemsListID | PixltonianCustomAssetsListID | PixltonianAutoAssetsListID | PixltonianLinksListID | PixltonianBacklinksListID | PixltonianItemBacklinksListID;
type PixltonianFileID = PixltonianID | PixltonianListID;
type PixltonianFile = PixltonianIndex | PixltonianList;

// Common attributes for each files
interface PixltonianBase {
    version: 'Pixltonian.io/version/v0.3.1'; // Proposal version for current file. It should be like `Pixltonian.io/version/v1.0.0`
    id: PixltonianFileID;
    date_created: string; // Specifies the created date in RFC 3339 format
    date_updated: string; // Specifies the updated date in RFC 3339 format
}

interface PixltonianSignedBase extends PixltonianBase {
    signature: string; // Signed by persona's private key; The signature content is the Keccak-256 hash of the array of object sorted by alphabetical and excluding objects containing `auto: true` field and the `signature` field itself(for example {a: "1", c: "2", b: {d: "3"}, e: {auto: true}} -> [["a", "1"], ["b", ["d", "3"]], ["c", "2"]]) or the string `Hi, Pixltonian. I'm your agent ${agent_id}` if using agent signature; Used for the object integration verification for both server side and persona side
    agent_id?: string; // A random ed25519 public key generated by the client
    agent_signature?: string; // A signature signed by `agent_id`'s private key, its content is the same as `signature`
}

interface PixltonianUnsignedBase extends PixltonianBase {
    auto: true;
}

// Pixltonian index file, main entrance for a persona
interface PixltonianIndex extends PixltonianSignedBase {
    id: PixltonianID;
    controller?: string; // A contract address indicating ownership of the file

    profile?: {
        name?: string;
        avatar?: ThirdPartyAddress;
        bio?: string;
        accounts?: {
            tags?: string[];
            id: AccountID;
            signature?: string; // Signature of [["address", id], ["id", account.id], ["tags", account.tags]], optional for no public-key cryptography platform
        }[];
    };

    links?: {
        tags?: string[];
        id: string; // Link id, for example: following superfollowing
        list?: PixltonianLinksListID; // Personas who belong to this link
    }[];

    backlinks?: {
        // Backlinks for this persona, for example: following link's backlink means followers.
        auto: true;
        id: string; // The same as links.id
        list: PixltonianBacklinksListID; // File ID of backlink list that belong to this link. See **PixltonianList** for more details
    }[];

    items?: {
        list_custom?: PixltonianCustomItemsListID; // Items automatically indexed by nodes
        list_auto?: PixltonianAutoItemsListID; // Items posted by personas themselves
    };

    assets?: {
        list_custom?: PixltonianCustomAssetsListID; // Assets automatically indexed by nodes
        list_auto?: PixltonianAutoAssetsListID; // Assets posted by personas themselves
    };
}

type PixltonianProfile = Required<PixltonianIndex>['profile'];
type PixltonianAccount = Required<PixltonianProfile>['accounts'][number];
type PixltonianLinks = Required<PixltonianIndex>['links'];

// Pixltonian list files, used for list of links, backlinks, items, assets, itemsbacklinks
interface PixltonianListBase<IDType, ElementType> {
    id: IDType;
    list?: ElementType[];
    list_next?: IDType;
}

type PixltonianCustomItemsList = PixltonianSignedBase & PixltonianListBase<PixltonianCustomItemsListID, PixltonianCustomItem>;
type PixltonianAutoItemsList = PixltonianUnsignedBase & PixltonianListBase<PixltonianAutoItemsListID, PixltonianAutoItem>;
type PixltonianCustomAssetsList = PixltonianSignedBase & PixltonianListBase<PixltonianCustomAssetsListID, PixltonianCustomAsset>;
type PixltonianAutoAssetsList = PixltonianUnsignedBase & PixltonianListBase<PixltonianAutoAssetsListID, PixltonianAutoAsset>;
type PixltonianLinksList = PixltonianSignedBase & PixltonianListBase<PixltonianLinksListID, PixltonianID>;
type PixltonianBacklinksList = PixltonianUnsignedBase & PixltonianListBase<PixltonianBacklinksListID, PixltonianID>;
type PixltonianItemBacklinksList = PixltonianUnsignedBase & PixltonianListBase<PixltonianItemBacklinksListID, PixltonianCustomItemID>;

// Asset
type PixltonianAsset = PixltonianCustomAsset | PixltonianAutoAsset;
type PixltonianCustomAsset = string; // A type of asset posted by persona itself, custom-${identity}-${type}-${uniqueID}, for example, persona's cute(q) Garage Kit(gk) (uniqueID 10035911): custom-gk-q-10035911
type PixltonianAutoAsset = string; // A type of asset that is automatically generated by a node, ${platform}-${identity}-${type}-${uniqueID}, for example, a NFT(uniqueID 0x456.5) in the Ethereum chain owned by apersona's EVM+ account(0x123): EVM+-0x123-Ethereum.NFT-0x456.5

// Item
type PixltonianItem = PixltonianCustomItem | PixltonianAutoItem;

interface PixltonianItemBase {
    date_created: string; // Specifies the published date in RFC 3339 format
    date_updated: string; // Specifies the modified date in RFC 3339 format

    title?: string;
    summary?: string;

    backlinks?: {
        // Interactive items from other personas.
        auto: true;
        id: string;
        list: PixltonianItemBacklinksListID; // File ID of items list that belong to this context. See **PixltonianList** for more details
    }[];
}

interface PixltonianCustomItem extends PixltonianItemBase {
    // A type of content posted by persona itself
    id: PixltonianCustomItemID; // `${PixltonianID}-item-custom-${index}`
    tags?: string[];
    authors?: PixltonianID[];

    link?: {
        id: string; // Link id for the non-original item, for example: comment like
        target: PixltonianCustomItemID | PixltonianAutoItemID; // Target of the non-original item
    };

    contents?: {
        // Contents of current item, possibly multiple different types of content
        tags?: string[];
        address: ThirdPartyAddress;
        mime_type: string; // [MIME type](https://en.wikipedia.org/wiki/Media_type) of current content
        name?: string;
        size_in_bytes?: string;
        duration_in_seconds?: string;
    }[];
}

interface PixltonianAutoItem extends PixltonianItemBase {
    // A type of content that is automatically generated by a node to represent a change of an asset
    id: PixltonianAutoItemID; // `${PixltonianID}-item-auto-${index}`

    target: {
        field: string; // 'items-auto-${AccountID}', `assets-${PixltonianAsset}` 'links-following', 'profile-avatar', `profile-accounts-${PixltonianAccount.id}`, etc
        action: {
            type: 'add' | 'remove' | 'update';
            payload?: string; // If the type is `add` or `remove`, then it is the added or removed content, empty means the content is itself, if the type is `update`, then it is the content after updating
            proof?: string; // Additional information used to make this target unique
        };
    };
}
```
</details>

ðŸŽ‰ [View full details](https://github.com/NaturalSelectionLabs/Pixltonian/blob/main/versions/v0.3.1.md)

## Historical drafts

[Changelog](https://github.com/NaturalSelectionLabs/Pixltonian/blob/main/CHANGELOG.md)

- [![Pixltonian](https://badge.Pixltonian.workers.dev/?version=v0.3.0)](https://github.com/NaturalSelectionLabs/Pixltonian/blob/main/versions/v0.3.0.md)
- [![Pixltonian](https://badge.Pixltonian.workers.dev/?version=v0.2.0)](https://github.com/NaturalSelectionLabs/Pixltonian/blob/main/versions/v0.2.0.md)
- [![Pixltonian](https://badge.Pixltonian.workers.dev/?version=v0.1.1)](https://github.com/NaturalSelectionLabs/Pixltonian/blob/main/versions/v0.1.1.md)
- [![Pixltonian](https://badge.Pixltonian.workers.dev/?version=v0.1.0)](https://github.com/NaturalSelectionLabs/Pixltonian/blob/main/versions/v0.1.0.md)
- [![Pixltonian](https://badge.Pixltonian.workers.dev/?version=v0.1.0%20alpha.0)](https://github.com/NaturalSelectionLabs/Pixltonian/blob/main/versions/v0.1.0-alpha.0.md)

## Contributing

Pixltonian is a community-based project, built with an open ecosystem and creative developers, and we thank every one for the participation.

- Report irrationality or request feature in [issues](https://github.com/NaturalSelectionLabs/Pixltonian/issues)
- Discussion in [discussions](https://github.com/NaturalSelectionLabs/Pixltonian/discussions)
- Submit your [pull request](https://github.com/NaturalSelectionLabs/Pixltonian/pulls)
